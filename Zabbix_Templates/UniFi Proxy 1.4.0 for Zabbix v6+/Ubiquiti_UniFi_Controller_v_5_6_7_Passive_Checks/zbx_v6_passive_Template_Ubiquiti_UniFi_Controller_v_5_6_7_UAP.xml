<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.0</version>
    <date>2023-05-03T06:59:32Z</date>
    <groups>
        <group>
            <uuid>7df96b18c230490a9a0a9e2307226338</uuid>
            <name>Templates</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>2e10d6a159d0461d9b370291eba0a388</uuid>
            <template>Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks</template>
            <name>Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks</name>
            <description>Template for Ubiquiti UniFI Access Point by zbx.sadman@gmail.com

Required:
UniFi Controller 5.x, 6.x, 7.x
Zabbix v6+
unifi_miner 1.4.0</description>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <discovery_rules>
                <discovery_rule>
                    <uuid>71fd364054d441e2bdf774d90d645e8c</uuid>
                    <name>Access Point</name>
                    <key>unifi.proxy[raw,device,{$SITENAME},*]</key>
                    <delay>1h</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#TYPE}</macro>
                                <value>{$DEVICE.TYPE.UAP}</value>
                                <formulaid>B</formulaid>
                            </condition>
                            <condition>
                                <macro>{#NAME}</macro>
                                <value>{$UAP.NAME}</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>2f3f32e68cbb4509a2359798cd4f9001</uuid>
                            <name>[ {#NAME} ] ICMP loss</name>
                            <type>SIMPLE</type>
                            <key>icmppingloss[{#IP}]</key>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>a25937279db34a47969bc50864238f39</uuid>
                            <name>[ {#NAME} ] ICMP response time</name>
                            <type>SIMPLE</type>
                            <key>icmppingsec[{#IP}]</key>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>9449efc4ca5146f59f0c86944e280ce1</uuid>
                            <name>[ {#NAME} ] ICMP ping</name>
                            <type>SIMPLE</type>
                            <key>icmpping[{#IP}]</key>
                            <history>1w</history>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>1de2b3409b1f4b02ae39e076fe16dbb8</uuid>
                            <name>[ {#NAME} ] FW version</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},,{#ID}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>TEXT</value_type>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].version</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>4ddcdd92c7b14477bdfd6809adce8da3</uuid>
                            <name>[ {#NAME} ] AP adopted</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},adopted,{#ID}]</key>
                            <delay>0</delay>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].adopted</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>0ce5c3a9b4f246a7b5bcb47215b70811</uuid>
                                    <expression>min(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},adopted,{#ID}],#3) = 0</expression>
                                    <name>[ {#NAME} ] AP not adopted</name>
                                    <priority>INFO</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>c59438e54d244581821665b0c0dbf197</uuid>
                            <name>[ {#NAME} ] AP connected to controller at</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},connected_at,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <units>unixtime</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].connected_at</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>eb82959e0d0d4064adfbc06936497b7c</uuid>
                            <name>[ {#NAME} ] AP has fan</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},has_fan,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].has_fan</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>5bbe1abecb94402e87410973f1858497</uuid>
                            <name>[ {#NAME} ] AP has speaker</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},has_speaker,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].has_speaker</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>545d040b03484c2285710327c9b2a3f0</uuid>
                            <name>[ {#NAME} ] AP isolated</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},isolated,{#ID}]</key>
                            <delay>0</delay>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].isolated</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>c0e318eaf8ef406aab39f087281798a8</uuid>
                                    <expression>min(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},isolated,{#ID}],#3)=1</expression>
                                    <name>[ {#NAME} ] AP isolated</name>
                                    <priority>WARNING</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>406faf4654ea453e80ec55b7629aef20</uuid>
                            <name>[ {#NAME} ] AP model</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},model,{#ID}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>TEXT</value_type>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].model</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>292730941bd2442782c62520693b4ab0</uuid>
                            <name>[ {#NAME} ] AP model in EOL</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},model_in_eol,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].model_in_eol</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>1859a80e81624cf2816553cf62840573</uuid>
                            <name>[ {#NAME} ] WiFi Experience</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].satisfaction</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>29d1de615c9d4e1394752760e58bd4f7</uuid>
                                    <expression>min(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD}) &gt; 0 and 
min(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD})&lt;{$UAP.SATISFACTION.MIN.WARN}</expression>
                                    <name>[ {#NAME} ] Client satisfaction is low</name>
                                    <priority>WARNING</priority>
                                    <description>min(/Template UniFi/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD}) &lt; 0 or
min(/Template UniFi/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD})&gt;{$UAP.SATISFACTION.MAX.WARN}</description>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>aa3e901f715c4df28cb02e0f224950df</uuid>
                            <name>[ {#NAME} ] AP serial</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},serial,{#ID}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>TEXT</value_type>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].serial</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>3c0b07b92505498c87e22cff4243bc14</uuid>
                            <name>[ {#NAME} ] Bits received (Wi-Fi)</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.rx_bytes,{#ID}]</key>
                            <delay>0</delay>
                            <units>bps</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].stat.ap.rx_bytes</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <parameters>
                                        <parameter>8</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>4e8beb1693834e8289c0df2d1d4c3d10</uuid>
                            <name>[ {#NAME} ] Bits sent (Wi-Fi)</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.tx_bytes,{#ID}]</key>
                            <delay>0</delay>
                            <units>bps</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].stat.ap.tx_bytes</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <parameters>
                                        <parameter>8</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>76627b5631174a9bad602b211c5c48c2</uuid>
                            <name>[ {#NAME} ] AP state</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},state,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <description>0 - AP Disconnected;
3 - AP Firmware Mismatch;
4 - AP Upgrading;
5 - AP Provisioning;
2 - ?? &amp;gt;&amp;gt; source code: c = e[&amp;quot;default&amp;quot;] ? e.discovered_via == &amp;quot;scan&amp;quot; ? Msg.APIsolatedPending : Msg.APPending : Msg.APManagedByOthers;
6 - AP HeartbeatMissed;
7 - AP Adopting;
8 - AP Deleting;
9 - AP Managed By Others;
10 - AP Adopt Failed;
11 - AP Isolated;</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].state</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>e0b86722eeea4811a73b5a378764ec3b</uuid>
                            <name>[ {#NAME} ] CPU utilized</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},system-stats.cpu,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].[&quot;system-stats&quot;].cpu</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>dd56ce3ac8c941009414d9a15368289e</uuid>
                            <name>[ {#NAME} ] Memory utilized</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},system-stats.mem,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].[&quot;system-stats&quot;].mem</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>641cd81e899f44d5964cd542355497cf</uuid>
                            <name>[ {#NAME} ] AP upgradable</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},upgradable,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].upgradable</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>356910c69dee4b7f9a6a9c3a197eb4d0</uuid>
                                    <expression>last(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},upgradable,{#ID}])</expression>
                                    <name>[ {#NAME} ] AP is upgradable</name>
                                    <status>DISABLED</status>
                                    <discover>NO_DISCOVER</discover>
                                    <priority>INFO</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>7345a884c457441db9a6714e72ccb6aa</uuid>
                            <name>[ {#NAME} ] Uptime</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},uptime,{#ID}]</key>
                            <delay>0</delay>
                            <units>s</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].uptime</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>86fa78918d024231b1a6d6970220653f</uuid>
                                    <expression>last(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},uptime,{#ID}])&lt;10m</expression>
                                    <name>[ {#NAME} ] AP has been restarted</name>
                                    <priority>WARNING</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>76d16d1371514725a01436c9b7581f64</uuid>
                            <name>[ {#NAME} ] master item</name>
                            <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            <history>0</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>item_role</tag>
                                    <value>master</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <uuid>c5258e5a95a040ce941c46837a80791c</uuid>
                            <name>[ {#NAME} ] Wi-Fi traffic</name>
                            <graph_items>
                                <graph_item>
                                    <color>199C0D</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks</host>
                                        <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.rx_bytes,{#ID}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>FFFF00</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks</host>
                                        <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.tx_bytes,{#ID}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#ID}</lld_macro>
                            <path>$._id</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#IP}</lld_macro>
                            <path>$.ip</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NAME}</lld_macro>
                            <path>$.name</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#SITEDESC}</lld_macro>
                            <path>$.usermacro_sitedesc</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#SITENAME}</lld_macro>
                            <path>$.usermacro_sitename</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#TYPE}</lld_macro>
                            <path>$.type</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>var obj=JSON.parse(value);
for (i = 0; i &lt; Object.keys(obj).length; i++) {
  //obj[i][&quot;usermacro_sitedesc&quot;] = '{$SITEDESC}';
  obj[i][&quot;usermacro_sitename&quot;] = '{$SITENAME}';
}
return JSON.stringify(obj)</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$DEVICE.TYPE.UAP}</macro>
                    <value>^uap$</value>
                </macro>
                <macro>
                    <macro>{$SITEDESC}</macro>
                    <value>DefSite</value>
                </macro>
                <macro>
                    <macro>{$SITENAME}</macro>
                    <value>default</value>
                </macro>
                <macro>
                    <macro>{$UAP.NAME}</macro>
                    <value>.*</value>
                </macro>
                <macro>
                    <macro>{$UAP.SATISFACTION.MAX.WARN}</macro>
                    <value>50</value>
                    <description>Value of WiFi experience (client satisfaction) for trigger close</description>
                </macro>
                <macro>
                    <macro>{$UAP.SATISFACTION.MIN.WARN}</macro>
                    <value>30</value>
                    <description>Value of WiFi experience (client satisfaction) for trigger rise</description>
                </macro>
                <macro>
                    <macro>{$UAP.SATISFACTION.TIME.PERIOD}</macro>
                    <value>5m</value>
                    <description>Time period for WiFi experience analyze</description>
                </macro>
            </macros>
        </template>
        <template>
            <uuid>d69712df7a614a39a74eef829e793caf</uuid>
            <template>Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks</template>
            <name>Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks</name>
            <description>Template Ubiquiti UniFI UniFi Controller by zbx.sadman@gmail.com

Required:
UniFi Controller 5.x, 6.x, 7.x
Zabbix v6+
unifi_miner 1.4.0</description>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>1f0f120e807c4835b06d3f8c5ce133dd</uuid>
                    <name>[ HEALTH ] master item</name>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    <delay>5m</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>item_role</tag>
                            <value>master</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>33ff2f2a051b4a1abc27fa934e5588e6</uuid>
                    <name>[ SYSINFO ] Autobackup enabled</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[0].autobackup&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].autobackup</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>6h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,sysinfo,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>sysinfo</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>66af7e754e24459eb4e5cd8dc02269b2</uuid>
                    <name>[ SYSINFO ] unifi_go_enabled</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[0].unifi_go_enabled&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].unifi_go_enabled</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>6h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,sysinfo,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>sysinfo</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>dbbacd5c87524cdbbe3320507342814d</uuid>
                    <name>[ SYSINFO ] Controller update available</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[0].update_available&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].update_available</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,sysinfo,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>sysinfo</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>208afe2e54124fd5b9c440788f919c05</uuid>
                            <expression>last(/Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[raw,health,{$SITENAME},&quot;[0].update_available&quot;,,NOT_FOUND]) = 1</expression>
                            <name>[ SYSINFO ] UniFi controller update available</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>sysinfo</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>0ac2d4fe351b480fa5f374e37195b046</uuid>
                    <name>[ SYSINFO ] Controller update downloaded</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[0].update_downloaded&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].update_downloaded</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,sysinfo,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>sysinfo</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>bcea797701e54c819b2109934bc3d371</uuid>
                    <name>[ SYSINFO ] Controller uptime</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[0].uptime&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <units>s</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].uptime</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,sysinfo,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>sysinfo</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>6cb573ecb79f4aeb83c3df64c68f9d51</uuid>
                            <expression>last(/Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[raw,health,{$SITENAME},&quot;[0].uptime&quot;,,NOT_FOUND])&lt;10m</expression>
                            <name>[ SYSINFO ] Controller has been restarted</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>dabcaf3ac03f40fcb866c0ed305e5d48</uuid>
                    <name>[ SYSINFO ] Controller version</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[0].version&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <status>DISABLED</status>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].version</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>6h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,sysinfo,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>sysinfo</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>d0d0a18ec0414d7a8ba007f720481e17</uuid>
                    <name>[ HEALTH | LAN ] subsystem master item</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=lan].*&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <status>DISABLED</status>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[?(@.subsystem == &quot;lan&quot;)]</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>item_role</tag>
                            <value>master</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>lan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>176c5482b8f843a39dbb24568a082b98</uuid>
                    <name>[ HEALTH | WAN ] Adopted swiches</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=lan].num_adopted&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_adopted</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>lan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>bb909525280749d88182c1c04873b351</uuid>
                    <name>[ HEALTH | WAN ] Disconnected switches</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=lan].num_disconnected&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_disconnected</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>lan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e98219d8c642489b96dadff0c1115c6e</uuid>
                    <name>[ HEALTH | WAN ] Pending switches</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=lan].num_pending&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_pending</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>lan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>bfe8efc298de4ec59018fd7745954ee4</uuid>
                    <name>[ HEALTH | LAN ] Total swiches</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=lan].num_sw&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_sw</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=lan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>lan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>376f48e1480f4b4e9e43693fbabbb2f1</uuid>
                    <name>[ HEALTH | WAN ] Subsystem status</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=lan].status&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <status>DISABLED</status>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].status</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>lan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>f18f94d6867c40a4aa567c1f0f0e8afc</uuid>
                    <name>[ HEALTH | WAN ] subsystem master item</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].*&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <status>DISABLED</status>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[?(@.subsystem == &quot;wan&quot;)]</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>item_role</tag>
                            <value>master</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>367fa5068f974becad1d94c728f6018a</uuid>
                    <name>[ HEALTH | WAN ] Adopted gateways</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].num_adopted&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_adopted</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>345daa1c686d4dbd936b79f8ea4facb4</uuid>
                    <name>[ HEALTH | WAN ] Disconnected gateways</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].num_disconnected&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_disconnected</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>eba27b78c83b410da120155a7a3d3eec</uuid>
                    <name>[ HEALTH | WAN ] Total gateways</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].num_gw&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_gw</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>1304065ec36d4943ad3583af16a15ee1</uuid>
                    <name>[ HEALTH | WAN ] Pending gateways</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].num_pending&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_pending</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>3b9291d862cd4ef9bbda9a46f34c049d</uuid>
                    <name>[ HEALTH | WAN ] Subsystem status</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].status&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <status>DISABLED</status>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].status</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>80e7acd7a3b248c09c53863bf8497775</uuid>
                    <name>[ HEALTH | WLAN ] subsystem master item</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].*&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <status>DISABLED</status>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[?(@.subsystem == &quot;wlan&quot;)]</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>item_role</tag>
                            <value>master</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wlan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>173e556e91b04ee683e8189f1579cb02</uuid>
                    <name>[ HEALTH | WLAN ] Adopted APs</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].num_adopted&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_adopted</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wlan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>7ee8eb625cea4f72833a1d8f0e8f2136</uuid>
                    <name>[ HEALTH | WLAN ] Total APs</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].num_ap&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_ap</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wlan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>0261f3d43aa742378c06bb246cd54149</uuid>
                    <name>[ HEALTH | WLAN ] Disabled APs</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].num_disabled&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_disabled</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wlan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>83f4e0b5e26f4eada193789576e70131</uuid>
                    <name>[ HEALTH | WLAN ] Disconnected APs</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].num_disconnected&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_disconnected</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wlan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>6277f712269e48faaf2df6367b48cb9d</uuid>
                    <name>[ HEALTH | WLAN ] Guest connected</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].num_guest&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_guest</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wlan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>5914e9f296d64b15a1b78d2206c17458</uuid>
                    <name>[ HEALTH | WLAN ] IOT devices connected</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].num_iot&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_iot</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wlan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>2ca924e324f24e97b1dbbc0750dc0a60</uuid>
                    <name>[ HEALTH | WLAN ] Pending APs</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].num_pending&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_pending</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wlan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>1e4db474d5f947ec9d96b06ea0748b24</uuid>
                    <name>[ HEALTH | WLAN ] Users connected</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].num_user&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].num_user</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wlan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>0e16fd0147c74a09b2f737ccbefe821d</uuid>
                    <name>[ HEALTH | WLAN ] Subsystem status</name>
                    <type>DEPENDENT</type>
                    <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].status&quot;,,NOT_FOUND]</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <status>DISABLED</status>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[0].status</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unifi.proxy[raw,health,{$SITENAME},&quot;[subsystem=wlan].*&quot;,,NOT_FOUND]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>health</value>
                        </tag>
                        <tag>
                            <tag>subsystem</tag>
                            <value>wlan</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>f5c02e994c37471eb5d2dce42c0c35e1</uuid>
                    <name>[ SYSINFO ] master item</name>
                    <key>unifi.proxy[raw,sysinfo,{$SITENAME},&quot;*&quot;,,NOT_FOUND]</key>
                    <delay>5m</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <tags>
                        <tag>
                            <tag>item_role</tag>
                            <value>master</value>
                        </tag>
                    </tags>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <uuid>a8d139258e66478fa43f268887fc62d4</uuid>
                    <name>Access Point</name>
                    <key>unifi.proxy[raw,device,{$SITENAME},*]</key>
                    <delay>1h</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#TYPE}</macro>
                                <value>{$DEVICE.TYPE.UAP}</value>
                                <formulaid>B</formulaid>
                            </condition>
                            <condition>
                                <macro>{#NAME}</macro>
                                <value>{$UAP.NAME}</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>3e56cf1830424a5497749bfe09b78bd5</uuid>
                            <name>[ {#NAME} ] ICMP loss</name>
                            <type>SIMPLE</type>
                            <key>icmppingloss[{#IP}]</key>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>e9d05ddcbe7d4821b4c2fa54cdd314fa</uuid>
                            <name>[ {#NAME} ] ICMP response time</name>
                            <type>SIMPLE</type>
                            <key>icmppingsec[{#IP}]</key>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>0475dec339134f21adebe121b30d3c33</uuid>
                            <name>[ {#NAME} ] ICMP ping</name>
                            <type>SIMPLE</type>
                            <key>icmpping[{#IP}]</key>
                            <history>1w</history>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>6e35795655dd40a59a0f01e5fce704ef</uuid>
                            <name>[ {#NAME} ] FW version</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},,{#ID}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>TEXT</value_type>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].version</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>8ef03b255cae46c5b6aab08ee83aa587</uuid>
                            <name>[ {#NAME} ] AP adopted</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},adopted,{#ID}]</key>
                            <delay>0</delay>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].adopted</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>d30cc9fe335947ee95512544623e6d3b</uuid>
                                    <expression>min(/Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},adopted,{#ID}],#3) = 0</expression>
                                    <name>[ {#NAME} ] AP not adopted</name>
                                    <priority>INFO</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>a41fe35a90bc447da82b61e4a68eb563</uuid>
                            <name>[ {#NAME} ] AP connected to controller at</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},connected_at,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <units>unixtime</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].connected_at</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>bfb681527e774d0fa75fa940a6cf350e</uuid>
                            <name>[ {#NAME} ] AP has fan</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},has_fan,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].has_fan</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>76aa4af9632c4c55b4b79a730334cb14</uuid>
                            <name>[ {#NAME} ] AP has speaker</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},has_speaker,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].has_speaker</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>500c2225a0d14b05870a5f452700ccd1</uuid>
                            <name>[ {#NAME} ] AP isolated</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},isolated,{#ID}]</key>
                            <delay>0</delay>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].isolated</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>de3963c84bf84d38b39634b0e6c6af7f</uuid>
                                    <expression>min(/Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},isolated,{#ID}],#3)=1</expression>
                                    <name>[ {#NAME} ] AP isolated</name>
                                    <priority>WARNING</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>5b94c583b49b4bdb99f7c8dfddfdb95f</uuid>
                            <name>[ {#NAME} ] AP model</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},model,{#ID}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>TEXT</value_type>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].model</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>205386bd5d4b445cb530e6e5e69b6536</uuid>
                            <name>[ {#NAME} ] AP model in EOL</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},model_in_eol,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].model_in_eol</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>6e017e27f59042de9ab99e8adbf7c327</uuid>
                            <name>[ {#NAME} ] WiFi Experience</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].satisfaction</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>b654355cbd694a1bb1791d9c18185bc6</uuid>
                                    <expression>min(/Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD}) &gt; 0 and 
min(/Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD})&lt;{$UAP.SATISFACTION.MIN.WARN}</expression>
                                    <name>[ {#NAME} ] Client satisfaction is low</name>
                                    <priority>WARNING</priority>
                                    <description>min(/Template UniFi/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD}) &lt; 0 or
min(/Template UniFi/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD})&gt;{$UAP.SATISFACTION.MAX.WARN}</description>
                                    <manual_close>YES</manual_close>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>c2ebc2a857de495bab000ec99e71dfce</uuid>
                            <name>[ {#NAME} ] AP serial</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},serial,{#ID}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>TEXT</value_type>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].serial</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>8a6f9eb37ae74ecb9f2354a048d2af88</uuid>
                            <name>[ {#NAME} ] Bits received (Wi-Fi)</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.rx_bytes,{#ID}]</key>
                            <delay>0</delay>
                            <units>bps</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].stat.ap.rx_bytes</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <parameters>
                                        <parameter>8</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>5556e9fae84e46eb9e6e38c8ad6ac09c</uuid>
                            <name>[ {#NAME} ] Bits sent (Wi-Fi)</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.tx_bytes,{#ID}]</key>
                            <delay>0</delay>
                            <units>bps</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].stat.ap.tx_bytes</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <parameters>
                                        <parameter>8</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>1accd237b5ba48849e6691cfd38e2638</uuid>
                            <name>[ {#NAME} ] AP state</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},state,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <description>0 - AP Disconnected;
3 - AP Firmware Mismatch;
4 - AP Upgrading;
5 - AP Provisioning;
2 - ?? &amp;gt;&amp;gt; source code: c = e[&amp;quot;default&amp;quot;] ? e.discovered_via == &amp;quot;scan&amp;quot; ? Msg.APIsolatedPending : Msg.APPending : Msg.APManagedByOthers;
6 - AP HeartbeatMissed;
7 - AP Adopting;
8 - AP Deleting;
9 - AP Managed By Others;
10 - AP Adopt Failed;
11 - AP Isolated;</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].state</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>f5929b73e92442ae939efa79652920b0</uuid>
                            <name>[ {#NAME} ] CPU utilized</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},system-stats.cpu,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].[&quot;system-stats&quot;].cpu</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>a81c479500e4401ba5a30546e14fdd4e</uuid>
                            <name>[ {#NAME} ] Memory utilized</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},system-stats.mem,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].[&quot;system-stats&quot;].mem</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>c8b6705794ad4c6c9aae7d51a0e956bd</uuid>
                            <name>[ {#NAME} ] AP upgradable</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},upgradable,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].upgradable</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>480fee45e9d14e8d94a57175c368a225</uuid>
                                    <expression>last(/Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},upgradable,{#ID}])</expression>
                                    <name>[ {#NAME} ] AP is upgradable</name>
                                    <status>DISABLED</status>
                                    <discover>NO_DISCOVER</discover>
                                    <priority>INFO</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>acb6b9e9995f43629e43cccf0bd74edf</uuid>
                            <name>[ {#NAME} ] Uptime</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},uptime,{#ID}]</key>
                            <delay>0</delay>
                            <units>s</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].uptime</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>700674c738d4488b98690487396265bc</uuid>
                                    <expression>last(/Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},uptime,{#ID}])&lt;10m</expression>
                                    <name>[ {#NAME} ] AP has been restarted</name>
                                    <priority>WARNING</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>4d040a3d22cb42338aec71aa43f6d883</uuid>
                            <name>[ {#NAME} ] master item</name>
                            <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            <history>0</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>item_role</tag>
                                    <value>master</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <uuid>41f484f489b348bbb7d49e7b1753ebe6</uuid>
                            <name>[ {#NAME} ] Wi-Fi traffic</name>
                            <graph_items>
                                <graph_item>
                                    <color>199C0D</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks</host>
                                        <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.rx_bytes,{#ID}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>FFFF00</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template Ubiquiti UniFi Controller v5 v6 v7 - passive checks</host>
                                        <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.tx_bytes,{#ID}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#ID}</lld_macro>
                            <path>$._id</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#IP}</lld_macro>
                            <path>$.ip</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NAME}</lld_macro>
                            <path>$.name</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#SITEDESC}</lld_macro>
                            <path>$.usermacro_sitedesc</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#SITENAME}</lld_macro>
                            <path>$.usermacro_sitename</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#TYPE}</lld_macro>
                            <path>$.type</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>var obj=JSON.parse(value);
for (i = 0; i &lt; Object.keys(obj).length; i++) {
  //obj[i][&quot;usermacro_sitedesc&quot;] = '{$SITEDESC}';
  obj[i][&quot;usermacro_sitename&quot;] = '{$SITENAME}';
}
return JSON.stringify(obj)</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$DEVICE.TYPE.UAP}</macro>
                    <value>^uap$</value>
                </macro>
                <macro>
                    <macro>{$SITEDESC}</macro>
                    <value>DefSite</value>
                </macro>
                <macro>
                    <macro>{$SITENAME}</macro>
                    <value>default</value>
                </macro>
                <macro>
                    <macro>{$UAP.NAME}</macro>
                    <value>.*</value>
                </macro>
                <macro>
                    <macro>{$UAP.SATISFACTION.MAX.WARN}</macro>
                    <value>50</value>
                    <description>Value of WiFi experience (client satisfaction) for trigger close</description>
                </macro>
                <macro>
                    <macro>{$UAP.SATISFACTION.MIN.WARN}</macro>
                    <value>30</value>
                    <description>Value of WiFi experience (client satisfaction) for trigger rise</description>
                </macro>
                <macro>
                    <macro>{$UAP.SATISFACTION.TIME.PERIOD}</macro>
                    <value>5m</value>
                    <description>Time period for WiFi experience analyze</description>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
