<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.0</version>
    <date>2023-05-15T06:43:15Z</date>
    <groups>
        <group>
            <uuid>7df96b18c230490a9a0a9e2307226338</uuid>
            <name>Templates</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>2e10d6a159d0461d9b370291eba0a388</uuid>
            <template>Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks</template>
            <name>Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks</name>
            <description>Template for Ubiquiti UniFI Access Point by zbx.sadman@gmail.com

Required:
UniFi Controller 5.x, 6.x, 7.x
Zabbix v6+
unifi_miner 1.4.0</description>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <discovery_rules>
                <discovery_rule>
                    <uuid>71fd364054d441e2bdf774d90d645e8c</uuid>
                    <name>Access Point</name>
                    <key>unifi.proxy[raw,device,{$SITENAME},*]</key>
                    <delay>1h</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#TYPE}</macro>
                                <value>{$DEVICE.TYPE.UAP}</value>
                                <formulaid>B</formulaid>
                            </condition>
                            <condition>
                                <macro>{#NAME}</macro>
                                <value>{$UAP.NAME}</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>2f3f32e68cbb4509a2359798cd4f9001</uuid>
                            <name>[ {#NAME} ] ICMP loss</name>
                            <type>SIMPLE</type>
                            <key>icmppingloss[{#IP}]</key>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>a25937279db34a47969bc50864238f39</uuid>
                            <name>[ {#NAME} ] ICMP response time</name>
                            <type>SIMPLE</type>
                            <key>icmppingsec[{#IP}]</key>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>9449efc4ca5146f59f0c86944e280ce1</uuid>
                            <name>[ {#NAME} ] ICMP ping</name>
                            <type>SIMPLE</type>
                            <key>icmpping[{#IP}]</key>
                            <history>1w</history>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>1de2b3409b1f4b02ae39e076fe16dbb8</uuid>
                            <name>[ {#NAME} ] FW version</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},,{#ID}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>TEXT</value_type>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].version</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>4ddcdd92c7b14477bdfd6809adce8da3</uuid>
                            <name>[ {#NAME} ] AP adopted</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},adopted,{#ID}]</key>
                            <delay>0</delay>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].adopted</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>0ce5c3a9b4f246a7b5bcb47215b70811</uuid>
                                    <expression>min(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},adopted,{#ID}],#3) = 0</expression>
                                    <name>[ {#NAME} ] AP not adopted</name>
                                    <priority>INFO</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>c59438e54d244581821665b0c0dbf197</uuid>
                            <name>[ {#NAME} ] AP connected to controller at</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},connected_at,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <units>unixtime</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].connected_at</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>eb82959e0d0d4064adfbc06936497b7c</uuid>
                            <name>[ {#NAME} ] AP has fan</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},has_fan,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].has_fan</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>5bbe1abecb94402e87410973f1858497</uuid>
                            <name>[ {#NAME} ] AP has speaker</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},has_speaker,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].has_speaker</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>545d040b03484c2285710327c9b2a3f0</uuid>
                            <name>[ {#NAME} ] AP isolated</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},isolated,{#ID}]</key>
                            <delay>0</delay>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].isolated</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>c0e318eaf8ef406aab39f087281798a8</uuid>
                                    <expression>min(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},isolated,{#ID}],#3)=1</expression>
                                    <name>[ {#NAME} ] AP isolated</name>
                                    <priority>WARNING</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>406faf4654ea453e80ec55b7629aef20</uuid>
                            <name>[ {#NAME} ] AP model</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},model,{#ID}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>TEXT</value_type>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].model</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>292730941bd2442782c62520693b4ab0</uuid>
                            <name>[ {#NAME} ] AP model in EOL</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},model_in_eol,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].model_in_eol</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>1859a80e81624cf2816553cf62840573</uuid>
                            <name>[ {#NAME} ] WiFi Experience</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].satisfaction</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>29d1de615c9d4e1394752760e58bd4f7</uuid>
                                    <expression>min(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD}) &gt; 0 and 
min(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD})&lt;{$UAP.SATISFACTION.MIN.WARN}</expression>
                                    <name>[ {#NAME} ] Client satisfaction is low</name>
                                    <priority>WARNING</priority>
                                    <description>min(/Template UniFi/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD}) &lt; 0 or
min(/Template UniFi/unifi.proxy[get,uap,{#SITENAME},satisfaction,{#ID}],{$UAP.SATISFACTION.TIME.PERIOD})&gt;{$UAP.SATISFACTION.MAX.WARN}</description>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>aa3e901f715c4df28cb02e0f224950df</uuid>
                            <name>[ {#NAME} ] AP serial</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},serial,{#ID}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>TEXT</value_type>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].serial</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>6h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>3c0b07b92505498c87e22cff4243bc14</uuid>
                            <name>[ {#NAME} ] Bits received (Wi-Fi)</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.rx_bytes,{#ID}]</key>
                            <delay>0</delay>
                            <units>bps</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].stat.ap.rx_bytes</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <parameters>
                                        <parameter>8</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>4e8beb1693834e8289c0df2d1d4c3d10</uuid>
                            <name>[ {#NAME} ] Bits sent (Wi-Fi)</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.tx_bytes,{#ID}]</key>
                            <delay>0</delay>
                            <units>bps</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].stat.ap.tx_bytes</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <parameters>
                                        <parameter>8</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>76627b5631174a9bad602b211c5c48c2</uuid>
                            <name>[ {#NAME} ] AP state</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},state,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <description>0 - AP Disconnected;
3 - AP Firmware Mismatch;
4 - AP Upgrading;
5 - AP Provisioning;
2 - ?? &amp;gt;&amp;gt; source code: c = e[&amp;quot;default&amp;quot;] ? e.discovered_via == &amp;quot;scan&amp;quot; ? Msg.APIsolatedPending : Msg.APPending : Msg.APManagedByOthers;
6 - AP HeartbeatMissed;
7 - AP Adopting;
8 - AP Deleting;
9 - AP Managed By Others;
10 - AP Adopt Failed;
11 - AP Isolated;</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].state</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>e0b86722eeea4811a73b5a378764ec3b</uuid>
                            <name>[ {#NAME} ] CPU utilized</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},system-stats.cpu,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].[&quot;system-stats&quot;].cpu</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>dd56ce3ac8c941009414d9a15368289e</uuid>
                            <name>[ {#NAME} ] Memory utilized</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},system-stats.mem,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].[&quot;system-stats&quot;].mem</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>641cd81e899f44d5964cd542355497cf</uuid>
                            <name>[ {#NAME} ] AP upgradable</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},upgradable,{#ID}]</key>
                            <delay>0</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].upgradable</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>BOOL_TO_DECIMAL</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>356910c69dee4b7f9a6a9c3a197eb4d0</uuid>
                                    <expression>last(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},upgradable,{#ID}])</expression>
                                    <name>[ {#NAME} ] AP is upgradable</name>
                                    <status>DISABLED</status>
                                    <discover>NO_DISCOVER</discover>
                                    <priority>INFO</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>7345a884c457441db9a6714e72ccb6aa</uuid>
                            <name>[ {#NAME} ] Uptime</name>
                            <type>DEPENDENT</type>
                            <key>unifi.proxy[get,uap,{#SITENAME},uptime,{#ID}]</key>
                            <delay>0</delay>
                            <units>s</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.[0].uptime</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>86fa78918d024231b1a6d6970220653f</uuid>
                                    <expression>last(/Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks/unifi.proxy[get,uap,{#SITENAME},uptime,{#ID}])&lt;10m</expression>
                                    <name>[ {#NAME} ] AP has been restarted</name>
                                    <priority>WARNING</priority>
                                    <tags>
                                        <tag>
                                            <tag>component</tag>
                                            <value>uap</value>
                                        </tag>
                                        <tag>
                                            <tag>name</tag>
                                            <value>{#NAME}</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>76d16d1371514725a01436c9b7581f64</uuid>
                            <name>[ {#NAME} ] master item</name>
                            <key>unifi.proxy[raw,uap,{#SITENAME},*,{#ID}]</key>
                            <history>0</history>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <tags>
                                <tag>
                                    <tag>component</tag>
                                    <value>uap</value>
                                </tag>
                                <tag>
                                    <tag>item_role</tag>
                                    <value>master</value>
                                </tag>
                                <tag>
                                    <tag>name</tag>
                                    <value>{#NAME}</value>
                                </tag>
                            </tags>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <uuid>c5258e5a95a040ce941c46837a80791c</uuid>
                            <name>[ {#NAME} ] Wi-Fi traffic</name>
                            <graph_items>
                                <graph_item>
                                    <color>199C0D</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks</host>
                                        <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.rx_bytes,{#ID}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>FFFF00</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template Ubiquiti UAP - UniFi Controller v5 v6 v7 - passive checks</host>
                                        <key>unifi.proxy[get,uap,{#SITENAME},stat.ap.tx_bytes,{#ID}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#ID}</lld_macro>
                            <path>$._id</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#IP}</lld_macro>
                            <path>$.ip</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NAME}</lld_macro>
                            <path>$.name</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#SITEDESC}</lld_macro>
                            <path>$.usermacro_sitedesc</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#SITENAME}</lld_macro>
                            <path>$.usermacro_sitename</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#TYPE}</lld_macro>
                            <path>$.type</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>var obj=JSON.parse(value);
for (i = 0; i &lt; Object.keys(obj).length; i++) {
  //obj[i][&quot;usermacro_sitedesc&quot;] = '{$SITEDESC}';
  obj[i][&quot;usermacro_sitename&quot;] = '{$SITENAME}';
}
return JSON.stringify(obj)</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$DEVICE.TYPE.UAP}</macro>
                    <value>^uap$</value>
                </macro>
                <macro>
                    <macro>{$SITEDESC}</macro>
                    <value>DefSite</value>
                </macro>
                <macro>
                    <macro>{$SITENAME}</macro>
                    <value>default</value>
                </macro>
                <macro>
                    <macro>{$UAP.NAME}</macro>
                    <value>.*</value>
                </macro>
                <macro>
                    <macro>{$UAP.SATISFACTION.MAX.WARN}</macro>
                    <value>50</value>
                    <description>Value of WiFi experience (client satisfaction) for trigger close</description>
                </macro>
                <macro>
                    <macro>{$UAP.SATISFACTION.MIN.WARN}</macro>
                    <value>30</value>
                    <description>Value of WiFi experience (client satisfaction) for trigger rise</description>
                </macro>
                <macro>
                    <macro>{$UAP.SATISFACTION.TIME.PERIOD}</macro>
                    <value>5m</value>
                    <description>Time period for WiFi experience analyze</description>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
